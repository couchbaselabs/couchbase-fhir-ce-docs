"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[863],{8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>l});var s=r(6540);const t={},i=s.createContext(t);function c(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(i.Provider,{value:n},e.children)}},8507:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>o,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"API/search-basic","title":"Search - Basic","description":"FHIR defines a powerful, standards-based query model for retrieving resources.","source":"@site/docs/API/search-basic.mdx","sourceDirName":"API","slug":"/API/search-basic","permalink":"/docs/API/search-basic","draft":false,"unlisted":false,"editUrl":"https://github.com/couchbaselabs/couchbase-fhir-ce-docs/tree/master/docs/API/search-basic.mdx","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"Search - Basic"},"sidebar":"tutorialSidebar","previous":{"title":"Bundle Processing","permalink":"/docs/API/bundle"},"next":{"title":"Search with _revinclude","permalink":"/docs/API/search-revinclude"}}');var t=r(4848),i=r(8453);const c={sidebar_position:10,title:"Search - Basic"},l="Search \u2014 Basic",d={},a=[{value:"Example",id:"example",level:3},{value:"GET Request",id:"get-request",level:4},{value:"Response: 200 OK",id:"response-200-ok",level:4},{value:"How Searches Work",id:"how-searches-work",level:2},{value:"Search Categories",id:"search-categories",level:2},{value:"Control Parameters",id:"control-parameters",level:2},{value:"Aggregation &amp; Count",id:"aggregation--count",level:2},{value:"Performance &amp; Indexing",id:"performance--indexing",level:2},{value:"Validation &amp; Profiles",id:"validation--profiles",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Summary",id:"summary",level:2}];function h(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"search--basic",children:"Search \u2014 Basic"})}),"\n",(0,t.jsx)(n.p,{children:"FHIR defines a powerful, standards-based query model for retrieving resources.\nCouchbase FHIR CE implements the FHIR R4 Search API completely, using Couchbase Full Text Search (FTS) for performance and native JSON flexibility."}),"\n",(0,t.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.h4,{id:"get-request",children:"GET Request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"GET /fhir/acme/Patient?name=Smith\n"})}),"\n",(0,t.jsx)(n.h4,{id:"response-200-ok",children:"Response: 200 OK"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{{\n    "resourceType": "Bundle",\n    "id": "c50e0a54-41ff-461d-9ee2-8183611710b7",\n    "meta": {\n        "lastUpdated": "2025-10-10T15:16:09.180-07:00"\n    },\n    "type": "searchset",\n    "total": 2,\n    "link": [\n        {\n            "relation": "self",\n            "url": "http://localhost:8080/fhir/acme/Patient?name=Smith"\n        }\n    ],\n    "entry": [\n        {\n            "fullUrl": "http://localhost:8080/fhir/acme/Patient/1234",\n            "resource": {\n                "resourceType": "Patient",\n                "id": "1234",\n                "meta": {\n                    "versionId": "3",\n                    "lastUpdated": "2025-10-08T23:41:35.194+00:00",\n                    "tag": [\n                        {\n                            "system": "http://couchbase.fhir.com/fhir/custom-tags",\n                            "code": "updated-by",\n                            "display": "user:anonymous"\n                        }\n                    ]\n                },\n                "name": [\n                    {\n                        "use": "official",\n                        "family": "Smith",\n                        "given": [\n                            "John",\n                            "Jr."\n                        ]\n                    }\n                ],\n                "telecom": [\n                    {\n                        "system": "phone",\n                        "value": "555-555-1111",\n                        "use": "mobile"\n                    },\n                    {\n                        "system": "email",\n                        "value": "john.smith@example.com"\n                    }\n                ],\n                "gender": "male",\n                "birthDate": "1990-01-01",\n                "deceasedDateTime": "2022-07-22"\n            },\n            "search": {\n                "mode": "match"\n            }\n        },\n        {\n            "fullUrl": "http://localhost:8080/fhir/acme/Patient/9ef036f1-a1ca-41c4-b4a2-1c6b13abb821",\n            "resource": {\n                "resourceType": "Patient",\n                "id": "9ef036f1-a1ca-41c4-b4a2-1c6b13abb821",\n                "meta": {\n                    "versionId": "1",\n                    "lastUpdated": "2025-10-08T21:13:17.259+00:00",\n                    "profile": [\n                        "http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient"\n                    ],\n                    "tag": [\n                        {\n                            "system": "http://couchbase.fhir.com/fhir/custom-tags",\n                            "code": "created-by",\n                            "display": "user:anonymousUser"\n                        }\n                    ]\n                },\n                "name": [\n                    {\n                        "use": "official",\n                        "family": "Smith",\n                        "given": [\n                            "John"\n                        ]\n                    }\n                ],\n                "gender": "male",\n                "birthDate": "1990-01-01"\n            },\n            "search": {\n                "mode": "match"\n            }\n        }\n    ]\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"ResourceType: Bundle"}),"\n",(0,t.jsx)(n.li,{children:"type: searchset"}),"\n",(0,t.jsx)(n.li,{children:"total: number of matches"}),"\n",(0,t.jsx)(n.li,{children:"entry[]: one per result, each with:"}),"\n",(0,t.jsx)(n.li,{children:"fullUrl"}),"\n",(0,t.jsx)(n.li,{children:"resource (the actual FHIR resource)"}),"\n",(0,t.jsx)(n.li,{children:'search.mode (e.g., "match", "include", "outcome")'}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"how-searches-work",children:"How Searches Work"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Request parsing","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The server interprets query parameters according to the FHIR R4 Search Parameter Registry for the given resource."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Index lookup","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"All queries are executed through Couchbase FTS indexes (with numeric/date/token analyzers as appropriate)."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Result assembly","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Matching document keys are fetched from Couchbase KV; resources are returned as a Bundle."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Post-filtering","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Optional parameters (_count, _sort, _summary, _elements, etc.) refine or truncate the result set."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Response","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'Always a FHIR Bundle with type: "searchset".'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"search-categories",children:"Search Categories"}),"\n",(0,t.jsx)(n.p,{children:"FHIR classifies parameters by data type. Couchbase FHIR CE supports all standard R4 types unless noted"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Category"}),(0,t.jsx)(n.th,{children:"Example"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"String"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"?name=Smith"})}),(0,t.jsx)(n.td,{children:"Case-insensitive match on string fields; prefix-based."}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Token"})}),(0,t.jsxs)(n.td,{children:["`?identifier=",(0,t.jsx)(n.a,{href:"http://hospital.smarthealthit.org",children:"http://hospital.smarthealthit.org"})]}),(0,t.jsx)(n.td,{children:"MRN001`"}),(0,t.jsx)(n.td,{children:"Exact match on system + code pairs (identifier, code, etc.)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Reference"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"?subject=Patient/1234"})}),(0,t.jsx)(n.td,{children:"Matches references to another resource."}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Date / DateTime"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"?birthdate=ge1980-01-01"})}),(0,t.jsxs)(n.td,{children:["Supports prefixes ",(0,t.jsx)(n.code,{children:"lt"}),", ",(0,t.jsx)(n.code,{children:"le"}),", ",(0,t.jsx)(n.code,{children:"gt"}),", ",(0,t.jsx)(n.code,{children:"ge"}),", ",(0,t.jsx)(n.code,{children:"eq"}),", ",(0,t.jsx)(n.code,{children:"ne"}),"."]}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Quantity"})}),(0,t.jsx)(n.td,{children:"`?value-quantity=120"}),(0,t.jsx)(n.td,{children:"mmHg`"}),(0,t.jsx)(n.td,{children:"Numeric + unit match; supports comparators."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"URI"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"?url=http://example.org/StructureDefinition/x"})}),(0,t.jsx)(n.td,{children:"Exact URI match."}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Composite / Special"})}),(0,t.jsxs)(n.td,{children:["e.g. ",(0,t.jsx)(n.code,{children:"_has"}),", ",(0,t.jsx)(n.code,{children:"_text"}),", ",(0,t.jsx)(n.code,{children:"_content"})]}),(0,t.jsx)(n.td,{children:"Advanced query semantics (no support yet)."}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"control-parameters",children:"Control Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Purpose"}),(0,t.jsx)(n.th,{children:"Example"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_count"})}),(0,t.jsx)(n.td,{children:"Limit number of results"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"?name=Smith&_count=10"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_sort"})}),(0,t.jsx)(n.td,{children:"Sort by field (ascending or descending)"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"?_sort=-_lastUpdated"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_summary"})}),(0,t.jsx)(n.td,{children:"Return only summary elements"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"?_summary=true"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_elements"})}),(0,t.jsx)(n.td,{children:"Specify explicit element list"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"?_elements=id,name,gender"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_include"})}),(0,t.jsx)(n.td,{children:"Include referenced resources"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.em,{children:"(covered separately)"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_revinclude"})}),(0,t.jsx)(n.td,{children:"Include reverse references"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.em,{children:"(covered separately)"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_total"})}),(0,t.jsxs)(n.td,{children:["Control total count computation (",(0,t.jsx)(n.code,{children:"none"}),", ",(0,t.jsx)(n.code,{children:"accurate"}),", ",(0,t.jsx)(n.code,{children:"estimate"}),")"]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"?_total=accurate"})})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"aggregation--count",children:"Aggregation & Count"}),"\n",(0,t.jsx)(n.p,{children:"FHIR\u2019s _count limits result size; Couchbase returns an accurate total unless you request _total=none.\nInternally, FTS aggregates count data efficiently using its result metadata."}),"\n",(0,t.jsx)(n.h2,{id:"performance--indexing",children:"Performance & Indexing"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"FTS-based searches scale linearly with cluster size."}),"\n",(0,t.jsx)(n.li,{children:"Each resource type has its own FTS index; low-traffic types share the General index."}),"\n",(0,t.jsx)(n.li,{children:"Numeric/date analyzers enable proper comparisons rather than string matches."}),"\n",(0,t.jsx)(n.li,{children:"Searches run at READ COMMITTED isolation \u2014 results reflect committed documents only (no partial writes)."}),"\n",(0,t.jsx)(n.li,{children:"KV fetch phase uses batch lookups for speed."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"validation--profiles",children:"Validation & Profiles"}),"\n",(0,t.jsx)(n.p,{children:"If the bucket is configured for US Core 6.1.0, additional search parameters defined by US Core are automatically active (for example, ?telecom, ?birthdate, ?gender, ?address-city, ?identifier, ?organization, etc.)."}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Keep searches specific (?identifier=, ?family=, ?birthdate=) for performance."}),"\n",(0,t.jsx)(n.li,{children:"Use _count and pagination controls instead of requesting massive result sets."}),"\n",(0,t.jsx)(n.li,{children:"Combine filters (?name=Smith&birthdate=lt1990-01-01) \u2014 conjunctive by default."}),"\n",(0,t.jsx)(n.li,{children:"When debugging, use _summary=text for lightweight results."}),"\n",(0,t.jsx)(n.li,{children:"Use Prefer: return=minimal header if you only need metadata."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Endpoint: ",(0,t.jsx)(n.code,{children:"/fhir/<bucket>/<resourceType>?<parameters>"})]}),"\n",(0,t.jsx)(n.li,{children:"Returns a Bundle \u2192 searchset"}),"\n",(0,t.jsx)(n.li,{children:"Fully FHIR R4-compliant; supports all core search parameter types"}),"\n",(0,t.jsx)(n.li,{children:"Backed by Couchbase FTS + KV for speed"}),"\n",(0,t.jsx)(n.li,{children:"Supports standard modifiers (_count, _sort, _elements, _summary, _total)"}),"\n",(0,t.jsx)(n.li,{children:"Extended with US Core search parameters when configured"}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}}}]);