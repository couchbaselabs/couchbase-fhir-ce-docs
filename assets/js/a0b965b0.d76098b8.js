"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7814],{1669:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"Admin UI/Admin - Validation","title":"FHIR Bucket Config","description":"Couchbase FHIR CE validates all incoming and outgoing resources using the HAPI FHIR validator.","source":"@site/docs/Admin UI/Admin - Validation.md","sourceDirName":"Admin UI","slug":"/Admin UI/Admin - Validation","permalink":"/docs/Admin UI/Admin - Validation","draft":false,"unlisted":false,"editUrl":"https://github.com/couchbaselabs/couchbase-fhir-ce-docs/tree/master/docs/Admin UI/Admin - Validation.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"FHIR Bucket Config","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Dashboard","permalink":"/docs/Admin UI/Admin - Dashboard"},"next":{"title":"Buckets View","permalink":"/docs/Admin UI/Admin - Buckets"}}');var r=i(4848),t=i(8453);const l={title:"FHIR Bucket Config",sidebar_position:2},d="Validation & Profiles",c={},a=[{value:"FHIR Validation Modes",id:"fhir-validation-modes",level:2},{value:"FHIR Normalization (applies to all modes)",id:"fhir-normalization-applies-to-all-modes",level:2},{value:"Validation Examples",id:"validation-examples",level:2},{value:"\u2705 Valid in all modes",id:"-valid-in-all-modes",level:4},{value:"\u26a0 Passes lenient / none, fails strict",id:"-passes-lenient--none-fails-strict",level:4},{value:"\u274c Fails lenient and strict",id:"-fails-lenient-and-strict",level:4},{value:"\u274c Fails lenient and strict",id:"-fails-lenient-and-strict-1",level:4},{value:"\u274c Fails lenient and strict",id:"-fails-lenient-and-strict-2",level:4},{value:"lenient vs strict \u2014 the Real Difference",id:"lenient-vs-strict--the-real-difference",level:2},{value:"When Profiles Are Enabled",id:"when-profiles-are-enabled",level:2},{value:"Recommended Modes",id:"recommended-modes",level:2},{value:"Understanding \u201cHelpful\u201d Parsing",id:"understanding-helpful-parsing",level:2},{value:"Summary",id:"summary",level:2},{value:"Bottom line:",id:"bottom-line",level:3}];function o(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"validation--profiles",children:"Validation & Profiles"})}),"\n",(0,r.jsx)(n.p,{children:"Couchbase FHIR CE validates all incoming and outgoing resources using the HAPI FHIR validator.\nValidation behavior depends on two factors:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Validation Mode \u2014 how strictly the resource is checked."}),"\n",(0,r.jsx)(n.li,{children:"Validation Profile \u2014 which FHIR/US Core specification the resource is checked against."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"fhir-validation-modes",children:"FHIR Validation Modes"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Mode"}),(0,r.jsx)(n.th,{children:"Behavior"}),(0,r.jsx)(n.th,{children:"Typical Use"}),(0,r.jsx)(n.th,{children:"Example that Passes"}),(0,r.jsx)(n.th,{children:"Example that Fails"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"none"})}),(0,r.jsxs)(n.td,{children:["No validation performed. Accepts any JSON containing ",(0,r.jsx)(n.code,{children:"resourceType"}),"."]}),(0,r.jsx)(n.td,{children:"Rapid development, bulk import, trusted data sources"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'{ "resourceType": "Patient", "gender": "xyz" }'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"Never fails"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"lenient"})}),(0,r.jsx)(n.td,{children:"Validates against the FHIR R4 spec but logs warnings instead of rejecting errors."}),(0,r.jsx)(n.td,{children:"Integration with legacy systems, relaxed QA"}),(0,r.jsx)(n.td,{children:"Valid resource with minor omissions"}),(0,r.jsx)(n.td,{children:"Missing required field \u2192 \u26a0 Warning only"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"strict"})}),(0,r.jsx)(n.td,{children:"Fully enforces FHIR R4 and profile constraints. Rejects invalid or incomplete resources."}),(0,r.jsx)(n.td,{children:"Production, regulated environments"}),(0,r.jsx)(n.td,{children:"Valid, well-formed resource"}),(0,r.jsx)(n.td,{children:"Missing identifier \u2192 \u274c Rejects"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"fhir-normalization-applies-to-all-modes",children:"FHIR Normalization (applies to all modes)"}),"\n",(0,r.jsx)(n.p,{children:"Couchbase FHIR always normalizes input before validation:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Input"}),(0,r.jsx)(n.th,{children:"Normalized Output"}),(0,r.jsx)(n.th,{children:"Note"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"given": "John"'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"given": ["John"]'})}),(0,r.jsx)(n.td,{children:"Single \u2192 array"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"active": [true]'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"active": true'})}),(0,r.jsx)(n.td,{children:"Array \u2192 scalar"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"family": " Smith "'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"family": "Smith"'})}),(0,r.jsx)(n.td,{children:"Trims whitespace"})]})]})]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"Because normalization happens first, even strict mode won\u2019t flag these shorthand formats as errors. Validation occurs after parsing."})}),"\n",(0,r.jsx)(n.h2,{id:"validation-examples",children:"Validation Examples"}),"\n",(0,r.jsx)(n.h4,{id:"-valid-in-all-modes",children:"\u2705 Valid in all modes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'{ "resourceType": "Patient",\n  "name": [{ "use": "official", "family": "Smith", "given": ["John"] }],\n  "gender": "male",\n  "birthDate": "1990-01-01"\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"-passes-lenient--none-fails-strict",children:"\u26a0 Passes lenient / none, fails strict"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'{ "resourceType": "Patient",\n  "name": [{ "family": "Smith" }],\n  "gender": "male"\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Reason: US Core requires an identifier and a full name.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"none \u2192 \u2705 accepts"}),"\n",(0,r.jsx)(n.li,{children:"lenient \u2192 \u26a0 warns, still stores"}),"\n",(0,r.jsx)(n.li,{children:"strict \u2192 \u274c rejects"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"-fails-lenient-and-strict",children:"\u274c Fails lenient and strict"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'{ "resourceType": "Patient",\n  "gender": "attack-helicopter",\n  "birthDate": "1990-01-01" }\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Invalid enum (gender must be male | female | other | unknown)."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"-fails-lenient-and-strict-1",children:"\u274c Fails lenient and strict"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'{ "resourceType": "Patient",\n  "gender": "Male",\n  "birthDate": "01/01/1990" }\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Wrong case + date format (YYYY-MM-DD expected)."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"-fails-lenient-and-strict-2",children:"\u274c Fails lenient and strict"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'{ "resourceType": "Patient",\n  "name": "Smith",\n  "gender": "male" }\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"name must be an array; invalid cardinality."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"lenient-vs-strict--the-real-difference",children:"lenient vs strict \u2014 the Real Difference"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"For base FHIR R4 (no profiles) the spec is permissive, so lenient \u2248 strict."}),"\n",(0,r.jsx)(n.li,{children:"Both reject obvious schema errors (invalid enum, wrong data type, bad cardinality)."}),"\n",(0,r.jsxs)(n.li,{children:["They differ only when profiles or terminology validation are active.","\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Scenario"}),(0,r.jsx)(n.th,{children:"lenient"}),(0,r.jsx)(n.th,{children:"strict"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Missing required field (per profile)"}),(0,r.jsx)(n.td,{children:"\u26a0 Warns"}),(0,r.jsx)(n.td,{children:"\u274c Rejects"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Invalid value set binding"}),(0,r.jsx)(n.td,{children:"\u26a0 Warns"}),(0,r.jsx)(n.td,{children:"\u274c Rejects"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Profile constraint violation"}),(0,r.jsx)(n.td,{children:"\u26a0 Warns"}),(0,r.jsx)(n.td,{children:"\u274c Rejects"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Unknown extension"}),(0,r.jsx)(n.td,{children:"\u2705 Accepts"}),(0,r.jsx)(n.td,{children:"\u26a0 Warns / rejects"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Base FHIR structural error"}),(0,r.jsx)(n.td,{children:"\u274c Rejects"}),(0,r.jsx)(n.td,{children:"\u274c Rejects"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"when-profiles-are-enabled",children:"When Profiles Are Enabled"}),"\n",(0,r.jsx)(n.p,{children:"When you set the profile for a bucket (e.g., US Core 6.1.0), validation extends beyond base FHIR:"}),"\n",(0,r.jsx)(n.p,{children:"US Core Patient requires:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2265 1 identifier"}),"\n",(0,r.jsx)(n.li,{children:"\u2265 1 name"}),"\n",(0,r.jsx)(n.li,{children:"gender"}),"\n",(0,r.jsxs)(n.li,{children:["Example:\n",(0,r.jsx)(n.code,{children:'{ "resourceType": "Patient", "gender": "male" }'}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Mode"}),(0,r.jsx)(n.th,{children:"Result"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"none"}),(0,r.jsx)(n.td,{children:"\u2705 Accepted"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"lenient"}),(0,r.jsx)(n.td,{children:"\u26a0 Logs warnings, stores anyway"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"strict"}),(0,r.jsx)(n.td,{children:"\u274c Rejects (missing required fields)"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"recommended-modes",children:"Recommended Modes"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Use Case"}),(0,r.jsx)(n.th,{children:"Recommended Mode"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Development / testing"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"none"})," \u2014 fastest, skip validation"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Integration / external sources"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"lenient"})," \u2014 allow warnings, keep data flowing"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Production / quality enforcement"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"strict"})," \u2014 reject invalid resources"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Regulated environments (HIPAA, GDPR, US Core)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"strict + profile"})," \u2014 required for compliance"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Internal tools / synthetic data"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"lenient"})," \u2014 balance speed and safety"]})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"understanding-helpful-parsing",children:"Understanding \u201cHelpful\u201d Parsing"}),"\n",(0,r.jsx)(n.p,{children:"Couchbase FHIR intentionally makes parsing forgiving to simplify developer experience:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Converts single values to arrays automatically."}),"\n",(0,r.jsx)(n.li,{children:"Trims whitespace."}),"\n",(0,r.jsx)(n.li,{children:"Normalizes data types where unambiguous."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This means lenient and strict share the same parser \u2014 strict mode focuses on semantic validation, not raw JSON schema enforcement."}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Mode"}),(0,r.jsx)(n.th,{children:"Checks"}),(0,r.jsx)(n.th,{children:"Rejects"}),(0,r.jsx)(n.th,{children:"Best For"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"none"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Nothing"}),(0,r.jsx)(n.td,{children:"Bulk load, dev"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"lenient"}),(0,r.jsx)(n.td,{children:"FHIR rules (+ warnings)"}),(0,r.jsx)(n.td,{children:"Severe structural errors"}),(0,r.jsx)(n.td,{children:"Integration"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"strict"}),(0,r.jsx)(n.td,{children:"FHIR + profiles (+ terminology)"}),(0,r.jsx)(n.td,{children:"Any violation"}),(0,r.jsx)(n.td,{children:"Production / Compliance"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"bottom-line",children:"Bottom line:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Without profiles, lenient \u2248 strict."}),"\n",(0,r.jsx)(n.li,{children:"With profiles, strict enforces structure, bindings, and required fields."}),"\n",(0,r.jsx)(n.li,{children:"Use none only for development or trusted bulk imports."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>d});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);