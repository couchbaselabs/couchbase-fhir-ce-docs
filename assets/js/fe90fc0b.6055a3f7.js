"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6088],{4614:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"API Tokens/OAuth","title":"OAuth Overview","description":"This page outlines the implementation of OAuth 2.0 authentication for the Couchbase FHIR Server. The goal is to provide secure API access through Bearer tokens while maintaining simplicity for internal use cases.","source":"@site/docs/API Tokens/OAuth.mdx","sourceDirName":"API Tokens","slug":"/API Tokens/OAuth","permalink":"/docs/API Tokens/OAuth","draft":false,"unlisted":false,"editUrl":"https://github.com/couchbaselabs/couchbase-fhir-ce-docs/tree/master/docs/API Tokens/OAuth.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"OAuth Overview"},"sidebar":"tutorialSidebar","previous":{"title":"User Management","permalink":"/docs/Users/Management"},"next":{"title":"API Token Management","permalink":"/docs/API Tokens/Management"}}');var t=i(4848),r=i(8453);const o={sidebar_position:1,title:"OAuth Overview"},a="OAuth Overview",l={},c=[{value:"What is OAuth 2.0?",id:"what-is-oauth-20",level:2},{value:"Authentication vs Authorization",id:"authentication-vs-authorization",level:2},{value:"JWT Tokens (JSON Web Tokens)",id:"jwt-tokens-json-web-tokens",level:2},{value:"Built-in Authorization Server",id:"built-in-authorization-server",level:2},{value:"Tokens at a Glance",id:"tokens-at-a-glance",level:2},{value:"How Tokens Are Issued",id:"how-tokens-are-issued",level:2},{value:"Using Tokens",id:"using-tokens",level:2},{value:"Clients &amp; Registration",id:"clients--registration",level:2},{value:"Token Lifecycle",id:"token-lifecycle",level:2},{value:"Notes",id:"notes",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"oauth-overview",children:"OAuth Overview"})}),"\n",(0,t.jsx)(n.p,{children:"This page outlines the implementation of OAuth 2.0 authentication for the Couchbase FHIR Server. The goal is to provide secure API access through Bearer tokens while maintaining simplicity for internal use cases."}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"This is only for OAuth autentication and separate from SMART."})}),"\n",(0,t.jsx)(n.h2,{id:"what-is-oauth-20",children:"What is OAuth 2.0?"}),"\n",(0,t.jsx)(n.p,{children:"OAuth 2.0 is a standard for granting limited access to HTTP APIs without sharing passwords. An application (client) obtains a token that represents the permissions (scopes) granted to a user or to the client itself, and presents that token with each request."}),"\n",(0,t.jsx)(n.h2,{id:"authentication-vs-authorization",children:"Authentication vs Authorization"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Authentication"}),": Verifies identity \u2014 \u201cWho are you?\u201d (user login with email/password)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Authorization"}),": Grants permissions \u2014 \u201cWhat can you do?\u201d (scopes like ",(0,t.jsx)(n.code,{children:"user/*.*"}),", ",(0,t.jsx)(n.code,{children:"system/*.*"}),")."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"In this system:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Users authenticate via the Admin UI."}),"\n",(0,t.jsx)(n.li,{children:"Tokens carry authorization (scopes) implied by the user\u2019s role (Admin or Developer)."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"jwt-tokens-json-web-tokens",children:"JWT Tokens (JSON Web Tokens)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Self-contained tokens with three parts: header, payload (claims), and signature."}),"\n",(0,t.jsx)(n.li,{children:"Signed by the server; the signature lets the API verify the token without a database lookup."}),"\n",(0,t.jsx)(n.li,{children:"Stateless by design \u2014 improves performance and scalability."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Example JWT structure (formatted for readability):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Header\n{\n\t"alg": "RS256",\n\t"typ": "JWT"\n}\n\n// Payload (claims)\n{\n\t"sub": "user-id-or-email",\n\t"iss": "https://your-domain/auth",\n\t"aud": "fhir-server",\n\t"exp": 1735600000,\n\t"iat": 1735596400,\n\t"scope": "user/*.*",\n\t"role": "developer"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"The server validates:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Signature (using its private/public key pair)"}),"\n",(0,t.jsxs)(n.li,{children:["Expiration (",(0,t.jsx)(n.code,{children:"exp"}),") and not-before (",(0,t.jsx)(n.code,{children:"nbf"}),") if present"]}),"\n",(0,t.jsxs)(n.li,{children:["Audience (",(0,t.jsx)(n.code,{children:"aud"}),") and issuer (",(0,t.jsx)(n.code,{children:"iss"}),") as configured"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"built-in-authorization-server",children:"Built-in Authorization Server"}),"\n",(0,t.jsx)(n.p,{children:"Couchbase FHIR CE embeds Spring Authorization Server. You do not need to deploy or configure a separate OAuth server:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Token issuance and validation are built-in."}),"\n",(0,t.jsx)(n.li,{children:"Admin UI provides user login, token generation, and client registration screens."}),"\n",(0,t.jsx)(n.li,{children:"Scopes are derived from roles automatically."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"tokens-at-a-glance",children:"Tokens at a Glance"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Bearer tokens (JWT) are issued via the Admin UI."}),"\n",(0,t.jsxs)(n.li,{children:["Roles imply scopes; scopes are embedded in tokens.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Admin \u2192 ",(0,t.jsx)(n.code,{children:"user/*.*"}),", ",(0,t.jsx)(n.code,{children:"system/*.*"})]}),"\n",(0,t.jsxs)(n.li,{children:["Developer \u2192 ",(0,t.jsx)(n.code,{children:"user/*.*"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Tokens authenticate API requests to ",(0,t.jsx)(n.code,{children:"/fhir/*"})," and ",(0,t.jsx)(n.code,{children:"/api/*"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Recommended: set reasonable expirations, rotate regularly, and revoke when compromised."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"how-tokens-are-issued",children:"How Tokens Are Issued"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Admin or Developer creates a token from the \u201cAPI Tokens\u201d page."}),"\n",(0,t.jsx)(n.li,{children:"Scopes auto-populate based on the creator\u2019s role."}),"\n",(0,t.jsx)(n.li,{children:"The token is shown once; copy and store it securely."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["See detailed steps: ",(0,t.jsx)(n.a,{href:"/docs/API%20Tokens/Management",children:"API Tokens Management"})]}),"\n",(0,t.jsx)(n.h2,{id:"using-tokens",children:"Using Tokens"}),"\n",(0,t.jsx)(n.p,{children:"Example request with a Bearer token:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -H "Authorization: Bearer <token>" \\\n\t\t -H "Accept: application/fhir+json" \\\n\t\t https://your-domain/fhir/Patient?_count=5\n'})}),"\n",(0,t.jsx)(n.h2,{id:"clients--registration",children:"Clients & Registration"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Client Registration is available in the Admin UI for managing client metadata."}),"\n",(0,t.jsx)(n.li,{children:"For simple internal workflows, user-issued tokens may be sufficient."}),"\n",(0,t.jsx)(n.li,{children:"For app integrations, use client registration with appropriate grant types (as configured)."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"token-lifecycle",children:"Token Lifecycle"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Issue"}),": Generated in Admin UI with scopes based on role."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use"}),": Sent as ",(0,t.jsx)(n.code,{children:"Authorization: Bearer <token>"})," on each request."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Expire"}),": Respect token ",(0,t.jsx)(n.code,{children:"exp"})," claim; prefer short lifetimes."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Revoke"}),": Remove access by revoking/deleting tokens in the UI."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"OAuth here is separate from SMART-on-FHIR flows."}),"\n",(0,t.jsx)(n.li,{children:"Token scopes map to backend permissions; scopes are not manually edited in the UI."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var s=i(6540);const t={},r=s.createContext(t);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);